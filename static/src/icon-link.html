<!--
@license
Copyright (c) 2017 Vangware. All rights reserved.
https://vangware.com
-->
<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="social-icons.html">

<!--
Link represented by an icon with aria label for a11y.

`title` Title of the link.
`href` Location of the link.
`icon` Icon to be used from social-icons.
`size` Size of the icon.
-->
<dom-module id="icon-link">
	<template>
		<style>
			:host {
				--default-icon-link-size: 15vmin;
				--iron-icon-fill-color: #FFF;
				background-color: var(--icon-link-color);
				border-radius: 50%;
				border: .5vmin solid #FFF;
				box-sizing: border-box;
				display: inline-block;
				height: var(--icon-link-size, var(--default-icon-link-size));
				overflow: hidden;
				width: var(--icon-link-size, var(--default-icon-link-size));
			}

			paper-icon-button {
				box-sizing: border-box;
				height: 100%;
				overflow: hidden;
				padding: calc(var(--icon-link-size, var(--default-icon-link-size)) * .25);
				width: 100%;
			}
		</style>
		<paper-icon-button aria-label=[[title]] icon=[[computedIcon]] title=[[title]]>[[title]]</paper-icon-button>
	</template>
	<script>
		class IconLink extends Polymer.Element {
			static get is() { return "icon-link"; }
			static get properties() {
				return {
					title: String,
					href: String,
					icon: String,
					size: String,
					color: String,
					computedIcon: {
						type: String,
						computed: "computeIcon(icon)"
					}
				};
			}
			constructor() {
				super();
				this.clickHandler = this.clickHandler.bind(this);
			}
			ready() {
				super.ready();
				[
					"auxclick",
					"click",
					"contextmenu"
				].forEach(event => this.addEventListener(event, this.clickHandler));
				this.updateStyles({
					"--icon-link-color": this.color
				});
			}
			detached() {
				super.detached();
				[
					"auxclick",
					"click",
					"contextmenu"
				].forEach(event => this.removeEventListener(event, this.clickHandler));
			}
			computeIcon(icon) {
				return `social-icons:${icon}`;
			}
			/**
			 * Click event handler.
			 * @param {ClickEvent} event
			 */
			clickHandler(event) {
				event.preventDefault();
				event.stopPropagation();
				window.open(this.href);
				return this;
			}
		}
		window.customElements.define(IconLink.is, IconLink);
	</script>
</dom-module>