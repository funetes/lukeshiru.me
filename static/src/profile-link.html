<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="profile-icons.html">
<link rel="import" href="rotating-element.html">

<dom-module id="profile-link">
	<template>
		<style>
		:host {
			--icon-size: 15vmin;
			display: block;
			left: 50%;
			margin: calc(var(--icon-size) * -0.5);
			position: absolute;
			top: 50%;
			width: var(--icon-size);
		}
		[aria-hidden=true] {
			display: none;
		}
		paper-icon-button {
			will-change: transform;
			border-radius: 50%;
			height: var(--icon-size);
			overflow: hidden;
			padding: calc(var(--icon-size) * .25);
			width: var(--icon-size);
		}
		</style>
		<rotating-element rpm=[[rpm]] inverted>
			<paper-icon-button
				id="button"
				icon=[[computedIcon]]
				aria-label=[[title]]
				on-tap="tapHandler"
			>[[title]]</paper-icon-button>
			<span aria-hidden="true">
				<span>[[title]]</span>
				<span> - </span>
				<span>[[href]]</span>
			</span>
		</rotating-element>
	</template>
	<script>
		class ProfileLink extends Polymer.Element {
			static get is() { return 'profile-link'; }
			static get properties() {
				return {
					title: String,
					href: String,
					icon: String,
					computedIcon: {
						type: String,
						computed: "computeIcon(icon)"
					},
					rpm: Number
				};
			}
			computeIcon(icon) {
				return `profile-icons:${icon}`;
			}
			tapHandler() {
				window.open(this.href);
			}
		}
		window.customElements.define(ProfileLink.is, ProfileLink);
	</script>
</dom-module>
